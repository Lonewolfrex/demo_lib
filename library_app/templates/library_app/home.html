{% extends 'library_app/index.html' %}

{% block title %}Home - Book Library{% endblock %}

{% block content %}
  <h2>Your Library</h2>

  <h3>Available Books</h3>
  <table>
    <thead>
      <tr>
        <th>Title</th><th>Author</th><th>Status</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for book in books %}
      <tr>
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>
          {% if book.available %}
            <span class="status-available">Available</span>
          {% else %}
            <span class="status-rented">Rented</span>
          {% endif %}
        </td>
        <td>
          {% if book.available %}
            <a href="{% url 'rent-book' book.id %}" class="btn-action">Rent</a>
            <a href="{% url 'buy-book' book.id %}" class="btn-action btn-buy">Buy</a>
          {% else %}
            <span class="disabled">Not Available</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No books available.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h3>Donate a Book</h3>
  <form method="POST" action="{% url 'donate-book' %}" class="form">
    {% csrf_token %}
    <label>Title:</label><br>
    <input type="text" name="title" required><br><br>
    <label>Author:</label><br>
    <input type="text" name="author" required><br><br>
    <button type="submit" class="btn-primary">Donate</button>
  </form>
{% endblock %}
